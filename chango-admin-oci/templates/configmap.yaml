apiVersion: v1
kind: ConfigMap
metadata:
  name: chango-admin-oci
  namespace: {{ .Values.namespace }}
  labels:
    app: chango-admin-oci
    component: chango
data:
  application.yml: |
    ---
    #####################
    # profile: common
    #####################
    management:
      endpoint:
        health:
          probes:
            enabled: true
      health:
        livenessState:
          enabled: true
        readinessState:
          enabled: true
        db:
          enabled: false
      server:
        port: {{ .Values.management.server.port }}
    
    server:
      port: {{ .Values.server.port }}
      servlet:
        context-path: /
      shutdown: graceful
      error:
        include-message: always
    
    ---
    #####################
    # profile: dev
    #####################
    spring:
      profiles: dev
    
    
    security:
      vault:
        host: localhost
        port: 8200
        token: {{ .Values.security.vault.token }}
    
    jdbc:
      driverClassName: com.mysql.jdbc.Driver
      url: {{ .Values.jdbc.url }}
      user: {{ .Values.jdbc.user }}
      pass: {{ .Values.jdbc.pass }}
    
    chango:
      controller:
        scheme: http
        host: localhost
        port: 8096
    
    hibernate:
      dialect: org.hibernate.dialect.MySQL5Dialect
      show_sql: {{ .Values.hibernate.show_sql }}
      globally_quoted_identifiers: true
    
    braintree:
      env: {{ .Values.braintree.env }}
    
    
    
    ---
    #####################
    # profile: prod
    #####################
    spring:
      profiles: prod
    
    security:
      vault:
        host: vault.chango-admin-oci.svc
        port: 8200
        token: {{ .Values.security.vault.token }}
    
    jdbc:
      driverClassName: com.mysql.jdbc.Driver
      url: {{ .Values.jdbc.url }}
      user: {{ .Values.jdbc.user }}
      pass: {{ .Values.jdbc.pass }}
    
    chango:
      controller:
        scheme: https
        host: chango-controller-oci-<user-id>.cloudchef-labs.com
        port: 443
    
    hibernate:
      dialect: org.hibernate.dialect.MySQL5Dialect
      show_sql: {{ .Values.hibernate.show_sql }}
      globally_quoted_identifiers: true
    
    braintree:
      env: {{ .Values.braintree.env }}
